<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Viver em Cristo - Gest√£o de C√©lula</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#000000',
            secondary: '#00b4bc',
            darker: '#050426',
            textLight: '#ffffff'
          },
          fontFamily: {
            sans: ['Sora', 'sans-serif'],
          },
        }
      }
    }
  </script>
  <style>
    body {
      font-family: 'Sora', sans-serif;
      background-color: #f5f5f5;
    }
  </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.4/",
    "react": "https://esm.sh/react@^19.2.4",
    "vite": "https://esm.sh/vite@^7.3.1",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.3",
    "recharts": "https://esm.sh/recharts@^3.7.0",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@^2.95.1",
    "lucide-react": "https://esm.sh/lucide-react@^0.563.0"
  }
}
</script>
  <link rel="stylesheet" href="/index.css">
</head>

<body>
  <div id="root"></div>

  <!-- CAPTURA DE ERROS CR√çTICOS PARA iOS - ANTES DO REACT -->
  <script>
    // Array para armazenar erros
    window.__errors = [];
    window.__logs = [];

    // Capturar erros n√£o tratados
    window.addEventListener('error', function (e) {
      window.__errors.push({
        type: 'error',
        message: e.message,
        filename: e.filename,
        lineno: e.lineno,
        colno: e.colno,
        stack: e.error ? e.error.stack : 'No stack'
      });
      showErrorOverlay();
      return false;
    });

    // Capturar promise rejections
    window.addEventListener('unhandledrejection', function (e) {
      window.__errors.push({
        type: 'promise',
        message: e.reason ? e.reason.toString() : 'Promise rejection',
        stack: e.reason ? e.reason.stack : 'No stack'
      });
      showErrorOverlay();
    });

    // Interceptar console
    const originalLog = console.log;
    const originalError = console.error;
    const originalWarn = console.warn;

    console.log = function (...args) {
      window.__logs.push({ type: 'log', message: args.join(' '), time: new Date().toLocaleTimeString() });
      originalLog.apply(console, args);
    };

    console.error = function (...args) {
      window.__errors.push({ type: 'console.error', message: args.join(' '), time: new Date().toLocaleTimeString() });
      originalError.apply(console, args);
      showErrorOverlay();
    };

    console.warn = function (...args) {
      window.__logs.push({ type: 'warn', message: args.join(' '), time: new Date().toLocaleTimeString() });
      originalWarn.apply(console, args);
    };

    // Mostrar overlay de erro
    function showErrorOverlay() {
      const existing = document.getElementById('error-overlay');
      if (existing) return;

      const overlay = document.createElement('div');
      overlay.id = 'error-overlay';
      overlay.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:#000;color:#0f0;font-family:monospace;font-size:11px;padding:10px;overflow-y:auto;z-index:999999;';

      let html = '<div style="color:#fff;font-size:14px;margin-bottom:10px;"><strong>üêõ ERRO CR√çTICO iOS</strong></div>';
      html += '<div style="margin-bottom:10px;padding:8px;background:#1a1a1a;border-radius:4px;">';
      html += '<div style="color:#fff;">üì± User Agent:</div>';
      html += '<div style="font-size:10px;word-break:break-all;">' + navigator.userAgent + '</div>';
      html += '</div>';

      html += '<div style="color:#fff;margin-top:10px;"><strong>‚ùå ERROS (' + window.__errors.length + '):</strong></div>';
      window.__errors.forEach(function (err) {
        html += '<div style="margin-top:8px;padding:6px;background:#3a0000;border-left:3px solid #f00;border-radius:2px;">';
        html += '<div style="color:#f66;font-size:10px;word-break:break-word;">' + err.message + '</div>';
        if (err.filename) html += '<div style="color:#888;font-size:9px;">Arquivo: ' + err.filename + ':' + err.lineno + '</div>';
        if (err.stack) html += '<div style="color:#666;font-size:9px;margin-top:4px;max-height:100px;overflow:auto;">' + err.stack + '</div>';
        html += '</div>';
      });

      html += '<div style="color:#fff;margin-top:10px;"><strong>üìã LOGS (' + window.__logs.length + '):</strong></div>';
      window.__logs.slice(-20).forEach(function (log) {
        const color = log.type === 'warn' ? '#fc6' : '#6f6';
        html += '<div style="margin-top:4px;padding:4px;background:#0a0a0a;border-left:2px solid ' + color + ';font-size:10px;">';
        html += '<span style="color:#888;">' + log.time + '</span> ';
        html += '<span style="color:' + color + ';">' + log.message + '</span>';
        html += '</div>';
      });

      overlay.innerHTML = html;
      document.body.appendChild(overlay);
    }

    // Verificar ap√≥s 3 segundos se React carregou
    setTimeout(function () {
      const root = document.getElementById('root');
      if (!root || root.children.length === 0) {
        window.__errors.push({
          type: 'timeout',
          message: 'React n√£o carregou ap√≥s 3 segundos - poss√≠vel erro de bundle ou import',
          time: new Date().toLocaleTimeString()
        });
        showErrorOverlay();
      }
    }, 3000);
  </script>

  <!-- Log imediato para verificar se JS est√° executando -->
  <script>
    console.log('üöÄ [HTML] Script carregado - JavaScript funcionando!');
    console.log('üöÄ [HTML] Iniciando carregamento do React...');
  </script>

  <script type="module" src="/index.tsx"></script>
</body>

</html>